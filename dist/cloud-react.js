import{Cloud as e}from"@alesmenzel/cloud";export*from"@alesmenzel/cloud";import{useRef as t,useCallback as n,useState as i,useEffect as r,useMemo as o}from"react";function c(e){const i=t(e);return i.current=e,n(((...e)=>{var t;return null===(t=i.current)||void 0===t?void 0:t.call(i,...e)}),[i])}function l(t){const[n,l]=i([]),[s]=i((()=>new e(t))),[u,a]=i(!t.items.length),{width:m,height:d,items:h,delay:f,transform:g,onInvalidPlacement:z,randomizer:p,collider:v,attempts:w}=t,x=c(g),b=c(z);return r((()=>{if(!h.length)return a(!1),void l([]);a(!1),l([]),s.update({width:m,height:d,attempts:w,randomizer:p,collider:v});let e,t,n=0;return e=requestAnimationFrame((function i(){const r=x?x(h[n]):h[n];let o=s.next(r);if(!o&&b&&(o=b(r)),o){const e=Object.assign(Object.assign({index:n},o),{item:r});l((t=>[...t,e]))}n+=1,n<h.length?void 0!==f?t=setTimeout((()=>{e=requestAnimationFrame(i)}),f):e=requestAnimationFrame(i):a(!0)})),()=>{cancelAnimationFrame(e),clearTimeout(t)}}),[h,s,f,m,d,w,x,b,v,p]),o((()=>({cloud:s,points:n,setPoints:l,allCalculated:u})),[s,n,u])}function s(e){const n=t(null);return null!=e?e:n}function u({ref:e,width:t=100,height:o=100,onResize:c}={}){const l=s(e),[u,a]=i({width:t,height:o}),m=n((e=>{a(e),null==c||c(e)}),[c]);return r((()=>{if(!l.current)return;const{clientWidth:e,clientHeight:t}=l.current;m({width:e,height:t});const n=new ResizeObserver((e=>{for(const t of e)if(t.contentBoxSize){const e=Array.isArray(t.contentBoxSize)?t.contentBoxSize[0]:t.contentBoxSize;m({width:e.inlineSize,height:e.blockSize})}}));return n.observe(l.current),()=>{n.disconnect()}}),[l,m]),Object.assign({ref:l},u)}export{l as useCloud,s as useOptionalRef,u as useResizeObserver};
//# sourceMappingURL=cloud-react.js.map
